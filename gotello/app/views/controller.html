{{ template "layout.html" }}

{{ define "content" }}
<style>
  .controller-box {
    text-align: center;
  }
</style>

<script>
  // paramsはMapのイメージ  command: "ceaseRoatation"
  function sendCommand(command, params = {}) {
    params['command'] = command
    // postした結果、成功した時(400)と失敗した時(200)の返りjsonで受け取る。
    $.post("/api/command/", params).done(function (json) {
      console.log({
        action: 'sendCommand',
        params: params,
        json: json,
        status: 'Success'
      })
    }, 'json').fail(function (json) {
      console.log({
        action: 'sendCommand',
        params: params,
        json: json,
        status: 'fail'
      })
    }, 'json')
  }
</script>


<div class="controller-box">
  <h1>Remote Controller</h1>
</div>

<div class="controller-box">
  <!-- ボタン類を横並びでまとめたい -->
  <div data-role="controlgroup" data-type="horizontal">
    <!-- a link は実行しないので return はFalseで終了させる -->
    <a href="#" data-role="button" onclick="sendCommand('ceaseRoatation'); return false;">Cease</a>
    <a href="#" data-role="button" onclick="sendCommand('takeOff'); return false;">Take off</a>
    <a href="#" data-role="button" onclick="sendCommand('land'); return false;">Land</a>
    <a href="#" data-role="button" onclick="sendCommand('hover'); return false;">Hover</a>

  </div>
</div>

{{ end }}